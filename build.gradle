import org.apache.tools.ant.filters.ReplaceTokens

plugins {
    id 'com.github.johnrengelman.shadow' version '5.0.0'
}

allprojects {
    apply plugin: 'java'
    apply plugin: 'com.github.johnrengelman.shadow'
    group = 'net.leomixer17'
    version = '1.3.5'
    description = 'Create cool interactive books!'
    sourceCompatibility = 1.8
    targetCompatibility = 1.8
    compileJava.options.encoding = 'UTF-8'
    repositories {
        jcenter()
        mavenCentral()
        maven { url = 'https://hub.spigotmc.org/nexus/content/repositories/snapshots' }
        maven { url = 'https://oss.sonatype.org/content/repositories/snapshots' }
        maven { url = 'https://repo.codemc.org/repository/nms/' }
        maven { url = 'http://repo.extendedclip.com/content/repositories/placeholderapi/' }
        maven { url = 'https://jitpack.io' }
    }
    tasks.processResources {
        filter ReplaceTokens, tokens: [
                "version"    : project.property("version"),
                "description": project.property("description")
        ]
    }
}

dependencies {
    compile project(path: ':core', configuration: 'shadow')
    compile project(path: ':spigot-v1_8_R2', configuration: 'shadow')
    compile project(path: ':spigot-v1_8_R3', configuration: 'shadow')
    compile project(path: ':spigot-v1_9_R1', configuration: 'shadow')
    compile project(path: ':spigot-v1_9_R2', configuration: 'shadow')
    compile project(path: ':spigot-v1_10_R1', configuration: 'shadow')
    compile project(path: ':spigot-v1_11_R1', configuration: 'shadow')
    compile project(path: ':spigot-v1_12_R1', configuration: 'shadow')
    compile project(path: ':spigot-v1_13_R1', configuration: 'shadow')
    compile project(path: ':spigot-v1_13_R2', configuration: 'shadow')
    compile project(path: ':spigot-v1_14_R1', configuration: 'shadow')
}

tasks.jar.enabled = false

tasks.shadowJar {
    archiveFileName = 'InteractiveBooks.jar'
}

artifacts {
    archives shadowJar
}

configurations.all {
    transitive = false
}
